<div class="dashboard-container">
  <h2>Overview</h2>

  <!-- Top Overview Cards -->
  <div class="overview-cards">
    <div class="card">
      <h4>Stock</h4>
      <p class="title">Total Products</p>
      <p class="count">{{totalItems}} Items in inventory</p>
    </div>
    <div class="card">
      <h4>Low Stock</h4>
      <p class="title">{{ lowStockCount }} Products</p>
      <div class="card-preview" *ngIf="lowStockItems?.length">
        <div *ngFor="let it of lowStockItems.slice(0,3)" class="preview-row">
          <span class="preview-name">{{ it.name }}</span>
          <span class="preview-qty">Qty: {{ it.quantity }}</span>
        </div>
      </div>
      <button class="btn-blue" (click)="openLowStockModal()">View Low Stock</button>
    </div>
    <div class="card">
      <h4>Orders</h4>
      <p class="title">{{ pendingOrdersCount }} Open Orders</p>
      <p class="note">{{ recentOrders?.length }} recent</p>
      <button class="btn-blue" (click)="openPendingOrdersModal()">View Orders</button>
    </div>
    <div class="card">
      <h4>Activity</h4>
      <p class="title">Recent Logs</p>
      <p class="note">System updated 2m ago</p>
      <button class="btn-blue" (click)="openLogsModal()">View Logs</button>
    </div>
  </div>

  <!-- Stock Level Chart -->
  <div class="chart-section">
    <apx-chart [series]="chartSeries" [chart]="chartDetails" [xaxis]="chartXAxis" [title]="chartTitle"
      [dataLabels]="dataLabels">
    </apx-chart>
  </div>

  <!-- Recent Orders -->
  <div class="recent-orders">
    <h3>Recent Orders</h3>
    <table>
      <thead>
        <tr>
          <th>Order</th>
          <th>Customer</th>
          <th>Status</th>
          <th>Items</th>
          <th>Time</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="recentOrders?.length === 0">
          <td class="no-results" colspan="5">No recent orders</td>
        </tr>
        <tr *ngFor="let order of recentOrders">
          <td>Order #{{ order.orderId }}</td>
          <td>{{ order.customerName }}</td>
          <td>{{ order.status }}</td>
          <td>{{ order.itemsCount || (order.items?.length || 0) }} Items</td>
          <td>{{ order.orderDate | date:'short' }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- show modal when requested -->
<app-modal *ngIf="showModal" [title]="modalTitle" [fields]="modalFields" [readonly]="true" [submitLabel]="modalSubmitLabel"
  (submit)="onModalSubmit($event)" (close)="closeModal()">
</app-modal>