<div class="orders-container">
  <!-- Header -->
  <div class="page-header">
    <h2>Orders</h2>
  </div>

  <!-- Summary Cards -->
  <div class="summary-cards">
    <div class="card">
      <div class="icon"><i class="fas fa-boxes-stacked"></i></div>
      <div>
        <h4>Total</h4>
        <p class="count">{{ totalOrders }} Orders</p>
        <p class="note">All time</p>
      </div>
    </div>
    <div class="card">
      <div class="icon"><i class="fas fa-hourglass-half"></i></div>
      <div>
        <h4>Pending</h4>
        <p class="count">{{ pendingOrders }} Orders</p>
        <p class="note">Awaiting fulfillment</p>
      </div>
    </div>
    <div class="card">
      <div class="icon"><i class="fas fa-circle-check"></i></div>
      <div>
        <h4>Completed</h4>
        <p class="count">{{ completedOrders }} Orders</p>
        <p class="note">Delivered</p>
      </div>
    </div>
  </div>

  <!-- Tabs and Create Button -->
  <div class="tabs-header">
    <div class="tabs">
      <button (click)="setFilter('all')" [class.active]="currentFilter==='all'">All</button>
      <button (click)="setFilter('pending')" [class.active]="currentFilter==='pending'">Pending</button>
      <button (click)="setFilter('shipped')" [class.active]="currentFilter==='shipped'">Shipped</button>
      <button (click)="setFilter('completed')" [class.active]="currentFilter==='completed'">Completed</button>
      <button (click)="setFilter('cancelled')" [class.active]="currentFilter==='cancelled'">Cancelled</button>
    </div>
    <button class="btn-primary" (click)="openAddOrderModal()">Create Order</button>
  </div>

  <!-- Orders Table -->
  <div class="order-table-container">
    <table class="order-table">
      <thead>
        <tr>
          <th>Order</th>
          <th>Customer</th>
          <th>Date</th>
          <th>Rate</th>
          <th>Total Amount</th>
          <th>Items</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="filteredOrders.length === 0" class="no-results-row">
          <td colspan="8" class="no-results">
            No {{ currentFilter | titlecase }} Orders found.
          </td>
        </tr>
        <tr *ngFor="let order of filteredOrders">
          <td data-label="Order">#{{ order.orderId }}</td>
          <td data-label="Customer">{{ order.customerName }}</td>
          <td data-label="Date">{{ order.orderDate | date:'dd-MM-yyyy' }}</td>
          <td data-label="Rate">{{ order.items[0]?.rate }}</td>
          <td data-label="Total Amount">{{ order.items[0]?.totalAmount }}</td>
          <td data-label="Items">{{ order.items[0]?.quantity }}</td>
          <td data-label="Status">{{ order.status }}</td>
          <td>
            <select [(ngModel)]="order.status" (change)="updateStatus(order.orderId, order.status)">
              <option value="Pending">Pending</option>
              <option value="Shipped">Shipped</option>
              <option value="Completed">Completed</option>
              <option value="Cancelled">Cancelled</option>
            </select>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Order Modal -->
  <app-modal *ngIf="showModal" [title]="modalTitle" [fields]="modalFields" [submitLabel]="modalSubmitLabel"
    (submit)="handleModalSubmit($event)" (close)="handleModalClose()"></app-modal>
</div>
